{"version":3,"sources":["main.js"],"names":[],"mappings":";;;;AAAA,OAAO,UAAU,CAAV,EAAa;AAClB,MAAI,qBAAqB;AACrB,cAAU,KAAV;AACA,gBAAY,KAAZ;AACA,cAAU,EAAV;AACA,gBAAY,CAAZ;AACA,aAAS,OAAT;AACA,iBAAa,KAAb;AACA,kBAAc,KAAd;AACA,kBAAc,IAAd;GARA;MAUF,mBAAmB,EAAnB;MACA,iBAAiB,EAAC,YAAY,IAAZ,EAAkB,cAAc,KAAd,EAAqB,aAAa,MAAb,EAAzD,CAZgB;;AAclB,mBAAiB,EAAjB,GAAsB,EAAE,gBAAF,EAAoB,cAApB,CAAmC,EAAC,QAAQ,kBAAR,EAApC,CAAtB,CAdkB;AAelB,mBAAiB,EAAjB,GAAsB,EAAE,QAAF,EAAY,cAAZ,CAA2B,EAAC,QAAQ,kBAAR,EAA5B,CAAtB,CAfkB;AAgBlB,mBAAiB,EAAjB,GAAsB,EAAE,QAAF,EAAY,cAAZ,CAA2B,EAAC,QAAQ,kBAAR,EAA5B,CAAtB,CAhBkB;AAiBlB,mBAAiB,QAAjB,GAA4B,EAAE,YAAF,EAAgB,cAAhB,CAA+B,EAAC,QAAQ,kBAAR,EAAhC,CAA5B,CAjBkB;;AAmBlB,MAAI,iBAAiB,EAAjB,CAAoB,MAApB,EAA4B;AAC9B,qBAAiB,EAAjB,CAAoB,cAApB,CAAmC,SAAnC,EAA8C,cAA9C,EAD8B;AAE9B,qBAAiB,EAAjB,CAAoB,cAApB,CAAmC,SAAnC,EAA8C,cAA9C,EAF8B;AAG9B,qBAAiB,EAAjB,CAAoB,cAApB,CAAmC,SAAnC,EAA8C,cAA9C,EAH8B;AAI9B,qBAAiB,QAAjB,CAA0B,cAA1B,CAAyC,SAAzC,EAAoD,cAApD,EAJ8B;GAAhC;;;AAnBkB,GA2BlB,CAAE,yBAAF,EAA6B,OAA7B,GA3BkB;AA4BlB,IAAE,yBAAF,EAA6B,OAA7B,GA5BkB;;AAiClB,MAAI,eAAe,EAAE,qBAAF,CAAf,CAjCc;AAkClB,eAAa,EAAb,CAAgB,OAAhB,EAAyB,UAAC,GAAD,EAAS;AAChC,QAAI,UAAU,CAAG,EAAE,iBAAF,EAAqB,GAArB,EAAH,CADkB;AAEhC,MAAE,IAAF,CAAO;AACL,WAAK,UAAL;AACA,YAAM,MAAN;AACA,YAAM;AACJ,oBAAY,OAAZ;OADF;AAGA,gBAAU,MAAV;AACA,kCAAS,MAAM;AACb,YAAI,KAAK,cAAL,CAAoB,cAApB,KAAuC,QAAO,KAAK,YAAL,CAAP,KAA6B,QAA7B,IAAyC,CAAC,CAAC,KAAK,YAAL,CAAkB,cAAlB,CAAiC,MAAjC,CAAD,EAA2C;AAC9H,cAAI,KAAK,YAAL,CAAkB,OAAlB,EAA2B;AAC7B,gBAAI,OAAO,KAAK,YAAL,CAAkB,IAAlB,CADkB;AAE7B,oBAAQ,KAAR,CAAc,IAAd,EAF6B;AAG7B,gBAAI,QAAO,KAAK,KAAL,CAAP,KAAsB,QAAtB,IAAkC,KAAK,KAAL,CAAW,WAAX,KAA2B,KAA3B,EAAkC;AACtE,mBAAK,KAAL,CAAW,OAAX,CAAmB,UAAC,QAAD,EAAW,GAAX,EAAkB;AACnC,oBAAI,iBAAiB,cAAjB,OAAoC,GAApC,CAAJ,EAAgD;;AAE9C,yCAAqB,GAArB,EAA4B,IAA5B,CAAiC,gBAAjC,EAAmD,IAAnD,CAAwD,QAAxD,EAF8C;iBAAhD;eADiB,CAAnB,CADsE;AAOtE,kBAAI,QAAO,KAAK,SAAL,CAAP,KAA0B,QAA1B,EAAoC;;AAEtC,kBAAE,yBAAF,EAA6B,GAA7B,CAAiC,KAAK,SAAL,CAAe,KAAK,SAAL,CAAhD,EAFsC;;AAItC,oBAAI,gBAAgB,qHAAhB,CAJkC;AAKtC,qBAAK,IAAI,KAAJ,IAAa,OAAO,IAAP,CAAY,KAAK,SAAL,CAA9B,EAA+C;AAC7C,sBAAI,KAAK,SAAL,CAAe,KAAf,EAAsB;AACxB,wBAAI,QAAQ,IAAI,IAAJ,GAAW,OAAX,CAAmB,CAAC,KAAK,SAAL,CAAe,KAAf,EAAsB,IAAtB,CAApB,CAAgD,MAAhD,CAAuD,WAAvD,CAAR,CADoB;AAExB,wBAAI,MAAM,IAAI,IAAJ,GAAW,OAAX,CAAmB,CAAC,KAAK,SAAL,CAAe,KAAf,EAAsB,EAAtB,CAApB,CAA8C,MAA9C,CAAqD,WAArD,CAAN,CAFoB;;AAIxB,0EAAkD,0DAAmD,wDAAiD,qBAAtJ,CAJwB;mBAA1B;iBADF;AAQA,iCAAiB,cAAjB,CAbsC;;AAetC,kBAAE,kBAAF,EAAsB,IAAtB,CAA2B,aAA3B,EAfsC;eAAxC;aAPF;WAHF,MA4BO;AACL,oBAAQ,KAAR,CAAc,MAAd,EAAsB,KAAK,YAAL,CAAtB,CADK;WA5BP;SADF;OARG;KAAP,EAFgC;;AA8ChC,QAAI,cAAJ,GA9CgC;GAAT,CAAzB,CAlCkB;;AAsFlB,WAAS,mBAAT,GAA+B;AAC7B,MAAE,mBAAF,EAAuB,UAAvB,CAAkC,kBAAlC,EACG,EADH,CACM,uBADN,EAC+B,YAAW;AACtC,UAAI,MAAM,EAAE,IAAF,CAAN,CADkC;AAEtC,UAAI,IAAI,IAAJ,CAAS,MAAT,EAAiB,KAAjB,CAAuB,aAAvB,CAAJ,EAA2C;;AAEzC,YAAI,OAAO,IAAI,MAAJ,GAAa,IAAb,CAAkB,0BAAlB,EAA8C,IAA9C,CAAmD,OAAnD,CAAP,CAFqC;AAGzC,YAAI,CAAC,KAAK,GAAL,GAAW,OAAX,CAAmB,QAAnB,EAA6B,EAA7B,CAAD,GAAoC,CAAC,IAAI,GAAJ,GAAU,OAAV,CAAkB,QAAlB,EAA4B,EAA5B,CAAD,EAAkC;;AAExE,eAAK,UAAL,CAAgB,SAAhB,EAA2B,IAAI,GAAJ,EAA3B,EAFwE;SAA1E;OAHF,MAQK,IAAI,IAAI,IAAJ,CAAS,MAAT,EAAiB,KAAjB,CAAuB,WAAvB,CAAJ,EAAyC;;AAE5C,YAAI,SAAS,IAAI,MAAJ,GAAa,IAAb,CAAkB,4BAAlB,EAAgD,IAAhD,CAAqD,OAArD,CAAT,CAFwC;AAG5C,YAAI,CAAC,OAAO,GAAP,GAAa,OAAb,CAAqB,QAArB,EAA+B,EAA/B,CAAD,GAAsC,CAAC,IAAI,GAAJ,GAAU,OAAV,CAAkB,QAAlB,EAA4B,EAA5B,CAAD,EAAkC;;AAE1E,iBAAO,UAAP,CAAkB,SAAlB,EAA6B,IAAI,GAAJ,EAA7B,EAF0E;SAA5E;OAHG;;AAViC,KAAX,CAD/B,CAD6B;GAA/B;;AAyBA,wBA/GkB;AAgHlB,IAAE,gBAAF,EAAoB,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AAC1C,QAAI,OAAO,EAAE,IAAF,CAAP,CADsC;AAE1C,QAAI,iBAAiB,KAAK,IAAL,CAAU,4BAAV,CAAjB,CAFsC;AAG1C,QAAI,KAAK,MAAL,IAAe,eAAe,MAAf,EAAuB;;AAGxC,UAAI,eAAe,QAAf,CAAwB,QAAxB,CAAJ,EAAuC;AACrC,uBAAe,WAAf,CAA2B,QAA3B,EADqC;OAAvC,MAEO;AACL,aAAK,MAAL,CAAY,eAAe,KAAf,EAAZ,EADK;OAFP;AAKA,4BARwC;KAA1C;GAH8B,CAAhC,CAhHkB;CAAb,CAAP","file":"main-compiled.js","sourcesContent":["jQuery(function ($) {\n  var timepickerSettings = {\n      template: false,\n      showInputs: false,\n      maxHours: 24,\n      minuteStep: 5,\n      default: '12:00',\n      showSeconds: false,\n      showMeridian: false,\n      explicitMode: true\n    },\n    $datetimepickers = [],\n    timepickerOpts = {sideBySide: true, showMeridian: false, defaultTime: '8:00'};\n\n  $datetimepickers._1 = $('#start-date-dt').datetimepicker({format: 'YYYY-MM-DD HH:mm'});\n  $datetimepickers._2 = $('#day-2').datetimepicker({format: 'YYYY-MM-DD HH:mm'});\n  $datetimepickers._3 = $('#day-3').datetimepicker({format: 'YYYY-MM-DD HH:mm'});\n  $datetimepickers.pushDate = $('#push-date').datetimepicker({format: 'YYYY-MM-DD HH:mm'});\n\n  if ($datetimepickers._1.length) {\n    $datetimepickers._1.datetimepicker('options', timepickerOpts);\n    $datetimepickers._2.datetimepicker('options', timepickerOpts);\n    $datetimepickers._3.datetimepicker('options', timepickerOpts);\n    $datetimepickers.pushDate.datetimepicker('options', timepickerOpts);\n  }\n\n  // All the tooltips\n  $('[data-toggle=\"tooltip\"]').tooltip();\n  $('[data-toggle=\"popover\"]').popover();\n\n\n\n\n  var $getDatesBtn = $('#get-dates-by-event');\n  $getDatesBtn.on('click', (evt) => {\n    let eventID = + ($('#dates-event-id').val());\n    $.ajax({\n      url: 'ajax.php',\n      type: 'post',\n      data: {\n        'event-id': eventID\n      },\n      dataType: 'json',\n      complete(resp) {\n        if (resp.hasOwnProperty('responseJSON') && typeof resp.responseJSON === \"object\" && !!resp.responseJSON.hasOwnProperty('data')) {\n          if (resp.responseJSON.success) {\n            let data = resp.responseJSON.data;\n            console.debug(data);\n            if (typeof data.dates === \"object\" && data.dates.constructor === Array) {\n              data.dates.forEach((dateTime, ind)=> {\n                if ($datetimepickers.hasOwnProperty(`_${ind}`)) {\n                  // Set the date onto the datetimepicker (using .data(\"DateTimePicker\").FUNCTION() )\n                  $datetimepickers[`_${ind}`].data(\"DateTimePicker\").date(dateTime);\n                }\n              });\n              if (typeof data.conflicts === \"object\") {\n                // Get the emails and their conflicts\n                $('input[name=\"conflicts\"]').val(JSON.stringify(data.conflicts));\n\n                let conflictsForm = \"<div class='row panel'><div class='panel panel-heading'>Watching for conflicts:</div><div class='panel panel-body'>\";\n                for (let email in Object.keys(data.conflicts)) {\n                  if (data.conflicts.email) {\n                    let _from = new Date().setTime(+data.conflicts[email].from).format('Y-m-d H:i');\n                    let _to = new Date().setTime(+data.conflicts[email].to).format('Y-m-d H:i');\n\n                    conflictsForm += `<div class='col-sm-6'><strong>${email}</strong></div><div class='col-sm-3'><code>${_from}</code></div><div class='col-sm-3'><code>${_to}</code></div>`;\n                  }\n                }\n                conflictsForm += \"</div></div>\";\n\n                $('.conflicts-group').html(conflictsForm);\n              }\n            }\n          } else {\n            console.error('fail', resp.responseJSON);\n          }\n        }\n      }\n    });\n\n    evt.preventDefault();\n  });\n\n\n\n\n  function setupAllTimePickers() {\n    $('.break-timepicker').timepicker(timepickerSettings)\n      .on('changeTime.timepicker', function() {\n        var $tc = $(this);\n        if ($tc.attr('name').match(/break-start/)) {\n          // Make sure end is after start\n          var $end = $tc.parent().next('label[for=\"break-end[]\"]').find('input');\n          if (+$end.val().replace(/[^0-9]/, '') < +$tc.val().replace(/[^0-9]/, '')) {\n            // the end time must be equal or greater than start\n            $end.timepicker('setTime', $tc.val());\n          }\n        }\n        else if ($tc.attr('name').match(/break-end/)) {\n          // Make sure start doesn't come after end\n          var $start = $tc.parent().prev('label[for=\"break-start[]\"]').find('input');\n          if (+$start.val().replace(/[^0-9]/, '') > +$tc.val().replace(/[^0-9]/, '')) {\n            // the end time must be equal or greater than start\n            $start.timepicker('setTime', $tc.val());\n          }\n        }\n        //console.log('The time is ' + e.time.value, 'The hour is ' + e.time.hours, 'The minute is ' + e.time.minutes, 'The meridian is ' + e.time.meridian);\n      });\n  }\n\n\n  setupAllTimePickers();\n  $('.add-new-break').on('click', function () {\n    var $btn = $(this);\n    var $newBreakInput = $btn.prev('.new-break-input-container');\n    if ($btn.length && $newBreakInput.length) {\n\n\n      if ($newBreakInput.hasClass('hidden')) {\n        $newBreakInput.removeClass('hidden');\n      } else {\n        $btn.before($newBreakInput.clone());\n      }\n      setupAllTimePickers();\n    }\n  });\n\n});\n"]}