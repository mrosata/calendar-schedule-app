<?php
/**
 * Created by michael on 2/22/16.
 */

class Mock_Content_Store {
    public $first_name = array('Liam', 'Noah', 'Ethan', 'Mason', 'Logan', 'Lucas', 'Jacob', 'Aiden', 'Jackson', 'Jack', 'Noah', 'Liam', 'Mason', 'Jacob', 'William', 'Ethan', 'Michael', 'Alexander', 'James', 'Daniel', 'Madison', 'Ava', 'Chloe', 'Aaliyah', 'Skylar', 'London,', 'Mia', 'Savannah', 'Olivia', 'Fatoumata', 'Isabella', 'Mariam', 'Serenity', 'Olivia', 'Chloe', 'Sophia', 'Emma', 'Emily', 'Angela', 'Mia', 'Grace', 'Isabella', 'Claire', 'Alina', 'Anna');
    public $last_name = array(
'Martin', 'Brown', 'Roy', 'Tremblay', 'Lee', 'Gagnon', 'Wilson', 'Tremblay', 'Gagnon', 'Roy', 'Côté', 'Bouchard', 'Gauthier', 'Morin', 'Lavoie', 'Fortin', 'Gagné', 'Ouellet', 'Pelletier', 'Bélanger', 'Lévesque', 'Bergeron', 'Leblanc', 'Paquette', 'Girard', 'Simard', 'Boucher', 'Caron', 'Fuentes', 'Cloutier', 'Dubé', 'Poirier', 'Fournier', 'Lapointe', 'Leclerc', 'Lefebvre', 'Poulin', 'Thibault', 'St-Pierre', 'Nadeau', 'Martin', 'Landry', 'Martel', 'Bédard', 'Grenier', 'Lessard', 'Bernier', 'Richard', 'Michaud', 'Hébert', 'Desjardins', 'Couture', 'Turcotte', 'Lachance', 'Parent', 'Blais', 'Gosselin', 'Savard', 'Proulx', 'Beaudoin', 'Demers', 'Perreault', 'Boudreau', 'Lemieux', 'Cyr', 'Perron', 'Dufour', 'Dion', 'Mercier', 'Bolduc', 'Bérubé', 'Boisvert', 'Brown', 'Ménard', 'Therrien', 'Plante', 'Bilodeau', 'Blanchette', 'Dubois', 'Champagne', 'Fortier', 'Arsenault', 'Dupuis', 'Gaudreault', 'Hamel', 'Houle', 'Villeneuve', 'Paradis', 'Rousseau', 'Gravel', 'Thériault', 'Lemay');
    public $domain_name = array('aol.com', 'att.net', 'comcast.net', 'facebook.com', 'gmail.com', 'gmx.com', 'googlemail.com',
        'google.com', 'hotmail.com', 'hotmail.co.uk', 'mac.com', 'me.com', 'mail.com', 'msn.com',
        'live.com', 'sbcglobal.net', 'verizon.net', 'yahoo.com', 'yahoo.co.uk');
    public $username = array('advert', 'advertising', 'afanasev', 'agafonov', 'agata', 'aksenov', 'aleksander', 'aleksandrov', 'alekse', 'alenka', 'alexe', 'alexeev', 'alla', 'anatol', 'andre', 'andreev', 'andrey', 'anna', 'anya', 'ao', 'aozt', 'arhipov', 'art', 'avdeev', 'avto', 'bank', 'baranov', 'Baseball', 'belousov', 'bill', 'billing', 'blinov', 'bobrov', 'bogdanov', 'buh', 'buhg', 'buhgalter', 'buhgalteria', 'business', 'bux', 'catchthismail', 'company', 'contact', 'contactus', 'corp', 'design', 'dir', 'director', 'direktor', 'dragon', 'economist', 'edu', 'email', 'er', 'expert', 'export', 'fabrika', 'fin', 'finance', 'ftp', 'glavbuh', 'glavbux', 'glbuh', 'helloitmenice', 'help', 'holding', 'home', 'hr', 'iamjustsendingthisleter', 'info', 'ingthisleter', 'job', 'john', 'kadry', 'letmein', 'mail', 'manager', 'marketing', 'marketing', 'mike', 'mogggnomgon', 'monkey', 'moscow', 'mysql', 'office', 'ok', 'oracle', 'password', 'personal', 'petgord34truew', 'post', 'postmaster', 'pr', 'qwerty', 'rbury', 'reklama', 'root', 'root', 'sale', 'sales', 'secretar', 'sekretar', 'support', 'test', 'testing', 'thisisjusttestletter', 'trade', 'uploader', 'user', 'webmaster');
    public $word = array(
        'the', 'name', 'of', 'very', 'to', 'through', 'and', 'just', 'a', 'form', 'in', 'much', 'is', 'great', 'it', 'think', 'you', 'say', 'that', 'help', 'he', 'low', 'was', 'line', 'for', 'before', 'on', 'turn', 'are', 'cause', 'with', 'same', 'as', 'mean', 'I', 'differ', 'his', 'move', 'they', 'right', 'be', 'boy', 'at', 'old', 'one', 'too', 'have', 'does', 'this', 'tell', 'from', 'sentence', 'or', 'set', 'had', 'three', 'by', 'want', 'hot', 'air', 'but', 'well', 'some', 'also', 'what', 'play', 'there', 'small', 'we', 'end', 'can', 'put', 'out', 'home', 'other', 'read', 'were', 'hand', 'all', 'port', 'your', 'large', 'when', 'spell', 'up', 'add', 'use', 'even', 'word', 'land', 'how', 'here', 'said', 'must', 'an', 'big', 'each', 'high', 'she', 'such', 'which', 'follow', 'do', 'act', 'their', 'why', 'time', 'ask', 'if', 'men', 'will', 'change', 'way', 'went', 'about', 'light', 'many', 'kind', 'then', 'off', 'them', 'need', 'would', 'house', 'write', 'picture', 'like', 'try', 'so', 'us', 'these', 'again', 'her', 'animal', 'long', 'point', 'make', 'mother', 'thing', 'world', 'see', 'near', 'him', 'build', 'two', 'self', 'has', 'earth', 'look', 'father', 'more', 'head', 'day', 'stand', 'could', 'own', 'go', 'page', 'come', 'should', 'did', 'country', 'my', 'found', 'sound', 'answer', 'no', 'school', 'most', 'grow', 'number', 'study', 'who', 'still', 'over', 'learn', 'know', 'plant', 'water', 'cover', 'than', 'food', 'call', 'sun', 'first', 'four', 'people', 'thought', 'may', 'let', 'down', 'keep', 'side', 'eye', 'been', 'never', 'now', 'last', 'find', 'door', 'any', 'between', 'new', 'city', 'work', 'tree', 'part', 'cross', 'take', 'since', 'get', 'hard', 'place', 'start', 'made', 'might', 'live', 'story', 'where', 'saw', 'after', 'far', 'back', 'sea', 'little', 'draw', 'only', 'left', 'round', 'late', 'man', 'run', 'year', 'don\'t', 'came', 'while', 'show', 'press', 'every', 'close', 'good', 'night', 'me', 'real', 'give', 'life', 'our', 'few', 'under', 'stop', 'open', 'ten', 'seem', 'simple', 'together', 'several', 'next', 'vowel', 'white', 'toward', 'children', 'war', 'begin', 'lay', 'got', 'against', 'walk', 'pattern', 'example', 'slow', 'ease', 'center', 'paper', 'love', 'often', 'person', 'always', 'money', 'music', 'serve', 'those', 'appear', 'both', 'road', 'mark', 'map', 'book', 'science', 'letter', 'rule', 'until', 'govern', 'mile', 'pull', 'river', 'cold', 'car', 'notice', 'feet', 'voice', 'care', 'fall', 'second', 'power', 'group', 'town', 'carry', 'fine', 'took', 'certain', 'rain', 'fly', 'eat', 'unit', 'room', 'lead', 'friend', 'cry', 'began', 'dark', 'idea', 'machine', 'fish', 'note', 'mountain', 'wait', 'north', 'plan', 'once', 'figure', 'base', 'star', 'hear', 'box', 'horse', 'noun', 'cut', 'field', 'sure', 'rest', 'watch', 'correct', 'color', 'able', 'face', 'pound', 'wood', 'done', 'main', 'beauty', 'enough', 'drive', 'plain', 'stood', 'girl', 'contain', 'usual', 'front', 'young', 'teach', 'ready', 'week', 'above', 'final', 'ever', 'gave', 'red', 'green', 'list', 'oh', 'though', 'quick', 'feel', 'develop', 'talk', 'sleep', 'bird', 'warm', 'soon', 'free', 'body', 'minute', 'dog', 'strong', 'family', 'special', 'direct', 'mind', 'pose', 'behind', 'leave', 'clear', 'song', 'tail', 'measure', 'produce', 'state', 'fact', 'product', 'street', 'black', 'inch', 'short', 'lot', 'numeral', 'nothing', 'class', 'course', 'wind', 'stay', 'question', 'wheel', 'happen', 'full', 'complete', 'force', 'ship', 'blue', 'area', 'object', 'half', 'decide', 'rock', 'surface', 'order', 'deep', 'fire', 'moon', 'south', 'island', 'problem', 'foot', 'piece', 'yet', 'told', 'busy', 'knew', 'test', 'pass', 'record', 'farm', 'boat', 'top', 'common', 'whole', 'gold', 'king', 'possible', 'size', 'plane', 'heard', 'age', 'best', 'dry', 'hour', 'wonder', 'better', 'laugh', 'true',	'thousand', 'during', 'ago', 'hundred', 'ran', 'am', 'check', 'remember', 'game', 'step', 'shape', 'early', 'yes', 'hold', 'hot', 'west', 'miss', 'ground', 'brought', 'interest', 'heat', 'reach', 'snow', 'fast', 'bed', 'five', 'bring', 'sing', 'sit', 'listen', 'perhaps', 'six', 'fill', 'table', 'east', 'travel', 'weight', 'less', 'language', 'morning', 'among',
    );

    public $email = array();
    public $counts = array();
    public $mock_id = 0;

    function __construct() {
        $this->counts = array(
            "domain_name" => count($this->domain_name),
            "first_name" => count($this->first_name),
            "last_name" => count($this->last_name),
            "username" => count($this->username),
            "email" => count($this->email),
            "word" => count($this->word),
        );
    }

    public function get($data_type) {
        if ($data_type == ":id:") {
            return $this->mock_id++;
        }
        if ( isset($this->{$data_type}) && isset($this->counts[$data_type])) {
            // If an array (first_name, last_name, ect.)
            $rand_index = (int)rand(0, $this->counts[$data_type] - 1);
            if (is_array($this->{$data_type}) && isset($this->{$data_type}[$rand_index])){
                return $this->{$data_type}[$rand_index];
            }
        }
        return '';
    }

    public function have($data_title) {
        if (property_exists($this, $data_title) && isset($this->counts[$data_title])) {
            return 1;
        }
        return 0;
    }

    function new_content_type($name, $template_string, $count=50) {
        $this->$name = array();
        $_this = $this;
        while ($count--) {
            // Add values to the array for new content type (generate values that already exist in arrays on class).

            array_push($this->$name, preg_replace_callback("|{{([^}\\s]+)}}|", function ($matches) use ($_this) {
                if (!isset($matches[1]))
                    return '';
                $data_type = $matches[1];
                $modifier = '';
                if (preg_match("|^\\:[a-zA-Z]\\:|", $data_type)) {
                    $modifier = preg_replace("|^\\s?\\:([a-zA-Z])\\:([^}\\s]+)|", "$1", $data_type);
                    $data_type = preg_replace("|(^\\s?\\:[a-zA-Z]\\:)([^}\\s]+)|", "$2", $data_type);
                }
                if ($_this->have($data_type)) {
                    $data = $_this->get($data_type);
                    // If there was modifier. Then modify.
                    switch (strtoupper($modifier)) {
                        case 'C':
                            $data = ucfirst($data);
                            break;
                        default:
                            break;
                    }
                    return $data;
                }
                // Just return the string, it didn't match any collections we have.
                return $data_type;
            }, $template_string));

        }
        $this->counts[$name] = count($this->$name);
    }

}



class Mock_Data_Creator extends Mock_Content_Store {
    private $model = array();

    function __construct() {
        parent::__construct();
        $this->generate_emails(40);
    }


    /**
     * Set the current model to be used for all mock content.
     * This can be changed with subsequent calls to set_model method.
     * Additionally, the model can be set explicitly upon calling the
     * generate_content method.
     *
     * @param $model
     */
    function set_model($model) {
        $this->model = $model;
    }


    /**
     * Generate an array of mock content based on $model
     *
     * @param int $count
     * @param null $model
     *
     * @return array
     */
    public function generate_content($count=50, $model=null) {
        $generated_content = array();
        while ($count--) {
            $generated_content[] = $this->_generate_content($model);
        }

        return $generated_content;
    }


    /**
     * Generate 1 object of mock content based on $model
     *
     * @param null $model
     *
     * @return stdClass
     */
    private function _generate_content($model=null) {
        if ($model == null)
            $model = $this->model;

        $data = new stdClass();
        if (!is_array($model))
            return $data;

        foreach ($model as $key => $value) {
            if (is_array($value)) {
                $data->$key = $this->_generate_content($value);
            } else {
                $data->$key = $this->get($value);
            }
        }

        return $data;
    }
}



class Mock_Projects_Investors extends Mock_Data_Creator
{
    function __construct() {
        parent::__construct();
        if (isset($_POST['email-pool']) && (int)$_POST['email-pool'] > 10 && (int)$_POST['email-pool'] < 1000) {
            $this->generate_emails((int)$_POST['email-pool']);
        } else {
            $this->generate_emails(100);
        }
        $this->generate_full_names(100);
        $this->generate_titles(200);
    }


    public function generate_emails($qty) {
        $this->new_content_type('email', '{{username}}@{{domain_name}}', $qty);
    }


    public function generate_titles($qty) {
        $this->new_content_type('movie_title', '{{:C:word}} {{word}} {{word}}', $qty);
    }


    public function generate_full_names($qty) {
        $this->new_content_type('full_name', '{{first_name}} {{last_name}}', $qty);
    }


}
